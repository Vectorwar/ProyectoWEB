<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema CRUD - Gesti√≥n de Tareas</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <header>
        <h1>üìä Sistema CRUD</h1>
        <p>Gesti√≥n de tareas con operaciones completas</p>
        <nav>
            <a href="../index.html" class="nav-link">‚Üê Volver al Inicio</a>
        </nav>
    </header>

    <main>
        <section class="intro">
            <h2>¬øQu√© es CRUD?</h2>
            <p>
                <strong>CRUD</strong> es un acr√≥nimo que representa las cuatro operaciones b√°sicas 
                de la gesti√≥n de datos:
            </p>
            <ul class="styled-list">
                <li><strong>C</strong>reate (Crear) - Agregar nuevos registros</li>
                <li><strong>R</strong>ead (Leer) - Visualizar registros existentes</li>
                <li><strong>U</strong>pdate (Actualizar) - Modificar registros existentes</li>
                <li><strong>D</strong>elete (Eliminar) - Borrar registros</li>
            </ul>
        </section>

        <section class="tools-section">
            <h2>Gestor de Tareas</h2>
            
            <div style="background-color: var(--bg-color); padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
                <h3>‚ûï Crear Nueva Tarea</h3>
                <form id="taskForm" style="display: grid; gap: 1rem; margin-top: 1rem;">
                    <div>
                        <label for="taskTitle" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">T√≠tulo:</label>
                        <input 
                            type="text" 
                            id="taskTitle" 
                            placeholder="Nombre de la tarea" 
                            required
                            style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 5px; font-size: 1rem;"
                        >
                    </div>
                    <div>
                        <label for="taskDesc" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Descripci√≥n:</label>
                        <textarea 
                            id="taskDesc" 
                            rows="3" 
                            placeholder="Describe la tarea"
                            style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 5px; font-size: 1rem; resize: vertical;"
                        ></textarea>
                    </div>
                    <div>
                        <label for="taskPriority" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Prioridad:</label>
                        <select 
                            id="taskPriority"
                            style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 5px; font-size: 1rem;"
                        >
                            <option value="baja">Baja</option>
                            <option value="media" selected>Media</option>
                            <option value="alta">Alta</option>
                        </select>
                    </div>
                    <button type="submit" class="btn">Agregar Tarea</button>
                </form>
            </div>

            <div id="tasksList">
                <h3>üìã Lista de Tareas</h3>
                <div id="tasksContainer" style="margin-top: 1rem;">
                    <!-- Las tareas se mostrar√°n aqu√≠ din√°micamente -->
                    <div style="text-align: center; padding: 2rem; color: var(--text-light);">
                        <p>No hay tareas registradas. ¬°Crea tu primera tarea!</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="tools-section">
            <h2>Operaciones CRUD Explicadas</h2>
            <div class="resources-list">
                <div class="resource-card">
                    <h3>CREATE (Crear)</h3>
                    <p>
                        Utiliza el formulario superior para crear nuevas tareas. Completa el t√≠tulo, 
                        descripci√≥n y prioridad, luego presiona "Agregar Tarea".
                    </p>
                </div>
                <div class="resource-card">
                    <h3>READ (Leer)</h3>
                    <p>
                        Todas las tareas creadas se visualizan autom√°ticamente en la lista de tareas. 
                        Puedes ver todos los detalles de cada tarea.
                    </p>
                </div>
                <div class="resource-card">
                    <h3>UPDATE (Actualizar)</h3>
                    <p>
                        Haz clic en el bot√≥n "Editar" de cualquier tarea para modificar su informaci√≥n. 
                        Los cambios se guardan inmediatamente.
                    </p>
                </div>
                <div class="resource-card">
                    <h3>DELETE (Eliminar)</h3>
                    <p>
                        Usa el bot√≥n "Eliminar" en cualquier tarea para borrarla permanentemente 
                        de la lista.
                    </p>
                </div>
            </div>
        </section>

        <div class="back-button">
            <a href="../index.html" class="btn">‚Üê Regresar a la P√°gina Principal</a>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Mi Proyecto Web. Sistema CRUD de gesti√≥n de tareas.</p>
    </footer>

    <script>
        // Array para almacenar las tareas
        let tasks = [];
        let editingId = null;

        // Referencias a elementos del DOM
        const form = document.getElementById('taskForm');
        const tasksContainer = document.getElementById('tasksContainer');
        const titleInput = document.getElementById('taskTitle');
        const descInput = document.getElementById('taskDesc');
        const priorityInput = document.getElementById('taskPriority');

        // Funci√≥n para generar un ID √∫nico
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // CREATE - Agregar tarea
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (editingId) {
                // UPDATE - Actualizar tarea existente
                updateTask(editingId);
            } else {
                // CREATE - Crear nueva tarea
                const newTask = {
                    id: generateId(),
                    title: titleInput.value,
                    description: descInput.value,
                    priority: priorityInput.value,
                    completed: false,
                    createdAt: new Date().toLocaleString()
                };
                
                tasks.push(newTask);
            }
            
            // Limpiar formulario
            form.reset();
            editingId = null;
            renderTasks();
        });

        // READ - Renderizar tareas
        function renderTasks() {
            if (tasks.length === 0) {
                tasksContainer.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-light);">
                        <p>No hay tareas registradas. ¬°Crea tu primera tarea!</p>
                    </div>
                `;
                return;
            }

            tasksContainer.innerHTML = tasks.map(task => `
                <div class="resource-card" style="border-left: 4px solid ${getPriorityColor(task.priority)};">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                        <h3 style="margin: 0; ${task.completed ? 'text-decoration: line-through; opacity: 0.6;' : ''}">${task.title}</h3>
                        <span style="background-color: ${getPriorityColor(task.priority)}; color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.85rem;">
                            ${task.priority.toUpperCase()}
                        </span>
                    </div>
                    <p style="color: var(--text-light); margin-bottom: 1rem;">${task.description || 'Sin descripci√≥n'}</p>
                    <p style="font-size: 0.85rem; color: var(--text-light); margin-bottom: 1rem;">
                        üìÖ Creada: ${task.createdAt}
                    </p>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button class="btn-small btn-complete" data-id="${task.id}" style="background-color: ${task.completed ? 'var(--warning-color)' : 'var(--success-color)'};">
                            ${task.completed ? '‚Ü∫ Reabrir' : '‚úì Completar'}
                        </button>
                        <button class="btn-small btn-edit" data-id="${task.id}">‚úé Editar</button>
                        <button class="btn-small btn-delete" data-id="${task.id}" style="background-color: var(--accent-color);">üóë Eliminar</button>
                    </div>
                </div>
            `).join('');
        }

        // Funci√≥n auxiliar para obtener el color seg√∫n la prioridad
        function getPriorityColor(priority) {
            const colors = {
                'baja': '#27ae60',
                'media': '#f39c12',
                'alta': '#e74c3c'
            };
            return colors[priority] || '#95a5a6';
        }

        // UPDATE - Editar tarea
        function editTask(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                titleInput.value = task.title;
                descInput.value = task.description;
                priorityInput.value = task.priority;
                editingId = id;
                
                // Scroll al formulario
                form.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function updateTask(id) {
            const taskIndex = tasks.findIndex(t => t.id === id);
            if (taskIndex !== -1) {
                tasks[taskIndex] = {
                    ...tasks[taskIndex],
                    title: titleInput.value,
                    description: descInput.value,
                    priority: priorityInput.value
                };
            }
        }

        // Completar/Reabrir tarea
        function toggleComplete(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                renderTasks();
            }
        }

        // DELETE - Eliminar tarea
        function deleteTask(id) {
            if (confirm('¬øEst√°s seguro de que deseas eliminar esta tarea?')) {
                tasks = tasks.filter(t => t.id !== id);
                renderTasks();
            }
        }

        // Event delegation for task buttons
        tasksContainer.addEventListener('click', function(e) {
            if (e.target.classList.contains('btn-complete')) {
                toggleComplete(e.target.dataset.id);
            } else if (e.target.classList.contains('btn-edit')) {
                editTask(e.target.dataset.id);
            } else if (e.target.classList.contains('btn-delete')) {
                deleteTask(e.target.dataset.id);
            }
        });

        // Renderizar tareas iniciales
        renderTasks();
    </script>
</body>
</html>